<html metal:use-macro="context/@@groupserver_layout/page">
  <head>
    <title metal:fill-slot="title">
      <span tal:replace="view/label"/> :
      <span tal:replace="view/siteInfo/get_name">A Site</span>
    </title>
    <tal:block metal:fill-slot="style">
      <style type="text/css">
        .message-result p {
          margin: 0;
        }
        .message-result ul {
          margin: 0 0 0.69em;
        }
        .message-result li {
          margin: 0 1em 0;
        }
        .statusActions {
          position: relative;
          border-top: thin solid black;
          border-bottom: thin solid black;
          padding-bottom: 1em;
          padding-left: 0.69em;
          overflow: hidden;
        }
        .userimage {
          padding: 0;
          float: right;
          margin-top: 1em;
          margin-right: 1em;
        }
        .form-widget {
          margin: 0.69em 0 0.69em;
        }
        .ptnCoach {
          margin: 0;
        }
        .ptnCoachRemove label {
          font-size: 138.5%;
          line-height: 1em;
          margin: 1em 0;
        }
      </style>
    </tal:block>
  </head>
  <body>
    <div metal:fill-slot="messages" tal:condition="view/status" 
      class="message-error"
      tal:define="e view/errors"
      tal:attributes="class python:e and 'message-error' or 'message-result'">
      <p class="form-status" tal:content="structure view/status"/>
      <dl tal:condition="view/errors">
        <tal:block repeat="widget view/widgets">
          <tal:block tal:condition="widget/error">
            <dt tal:content="widget/label">Widget Name</dt>
            <dd class="error" 
              tal:content="structure widget/error">Error message</dd>
          </tal:block>
        </tal:block>
      </dl>
    </div>
    <tal:block metal:fill-slot="body"
      define="memberManager view/memberManager">
      <h1 tal:content="view/label">
        Manage the Members of 
        <span tal:replace="view/groupInfo/name">this group</span>
      </h1>
      <form enctype="multipart/form-data"  method="post" action="."
        tal:attributes="action request/URL" id="manage-members">
        <p
          tal:define="membersInfo memberManager/membersInfo;
            fullMemberCount membersInfo/fullMemberCount;
            invitedMemberCount membersInfo/invitedMemberCount">
          There 
          <span tal:replace="python:fullMemberCount==1 and 'is 1 member' or 'are %d members' % fullMemberCount"/> 
          &#8212; and
          <span tal:replace="python:invitedMemberCount==1 and '1 invited member' or '%d invited members' % invitedMemberCount"/>
          &#8212; 
          in <span tal:replace="view/groupInfo/name">this group</span>.
          (<a href="admin_invite.html">Invite more members</a>.)
        </p>
        <ul
          tal:define="show python:view.showOnly or 'all';
            showAll python:show=='all';
            showManagers python:show=='managers';
            showModerated python:show=='moderated';
            showUnverified python:show=='unverified';
            showInvited python:show=='invited';
            showPostingIsValid view/postingIsSpecial;
            showPosting python:showPostingIsValid and show=='posting'">
          <li tal:condition="showAll">Listing <strong>all the members</strong></li>
          <li tal:condition="not:showAll">
            <a href="#"
              tal:attributes="href string:managemembers.html">List  
              all the members of <span tal:replace="view/groupInfo/name" />
            </a>
          </li>
          <li tal:condition="showManagers">Listing all <strong>managers</strong></li>
          <li tal:condition="not:showManagers">
            <a href="#"
              tal:attributes="href string:managemembers.html?showOnly=managers">List  
              only the managers of <span tal:replace="view/groupInfo/name" />
            </a>
          </li>
          <li tal:condition="showModerated">Listing all <strong>moderated members</strong></li>
          <li tal:condition="not:showModerated">
            <a href="#"
              tal:attributes="href string:managemembers.html?showOnly=moderated">List  
              only the moderated members of <span tal:replace="view/groupInfo/name" />
            </a>
          </li>
          <li tal:condition="showUnverified">Listing all <strong>members with no verified email addresses</strong></li>
          <li tal:condition="not:showUnverified">
            <a href="#"
              tal:attributes="href string:managemembers.html?showOnly=unverified">List  
              only the members of <span tal:replace="view/groupInfo/name" /> with no verified email addresses
            </a>
          </li>
          <li tal:condition="showInvited">Listing all <strong>invited members</strong></li>
          <li tal:condition="not:showInvited">
            <a href="#"
              tal:attributes="href string:managemembers.html?showOnly=invited">List  
              only the invited members of <span tal:replace="view/groupInfo/name" />
            </a>
          </li>
          <li tal:condition="showPosting">Listing all <strong>posting</strong></li>
          <li tal:condition="python:showPostingIsValid and not(showPosting)">
            <a href="#"
              tal:attributes="href string:managemembers.html?showOnly=invited">List  
              only the invited members of <span tal:replace="view/groupInfo/name" />
            </a>
          </li>
        </ul>
        <tal:block define="statusActions memberManager/memberStatusActions;
          widgets view/widgets">
          <div tal:replace="structure provider:groupserver.MemberStatusActions"/>
        </tal:block>
        <div class="statusActions"
          tal:define="hasPtnCoachRemove python:view.widgets.get('ptnCoachRemove')"
          tal:condition="python:hasPtnCoachRemove and not(memberManager.postingIsSpecial)"
          tal:attributes="class python:((len(memberManager.memberStatusActions)%2)==0) and 'statusActions odd' or 'statusActions'">
          <div class="ptnCoach ptnCoachRemove" 
            tal:define="widgets python:[view.widgets['ptnCoachRemove']]">
            <div tal:replace="structure provider:groupserver.FormWidgets"/>
          </div>
        </div>
        <p tal:condition="not:view/form_fields">
          There are no members to display.
        </p>
        <div class="buttons" tal:condition="python:view.availableActions and view.form_fields">
          <tal:block repeat="action view/actions">
            <div class="formelementbutton">
              <span tal:replace="structure action/render">Button</span>
            </div>
          </tal:block>
        </div>
      </form>
    </tal:block>
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript"
        src="/++resource++managemembers-20100715.js">&#160;</script>
      <script type="text/javascript">
        jQuery.noConflict();
        jQuery(document).ready( function () {
          GSManageMembers.init();
        });
      </script>
    </tal:block>
  </body>
</html>

