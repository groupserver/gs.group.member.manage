<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="gs.group.member.manage"
      metal:use-macro="context/@@groupserver_layout/page">
  <head>
    <title metal:fill-slot="title">
      Manage members:
      <span tal:replace="view/groupInfo/name">This group</span>:
      <span tal:replace="view/siteInfo/name">This Site</span>
    </title>
    <tal:block metal:fill-slot="metadata">
      <link rel="up" href="#" title="The group"
            tal:attributes="href view/groupInfo/relative_url;
                            title view/groupInfo/name"/>
    </tal:block>
    <style metal:fill-slot="style">
      #gs-group-member-manage-alternate-actions {
        padding-top: 5px;
        float: right;
      }
      #gs-group-member-manage-pager {
        padding-left: 1em; /*1u*/
      }
      #gs-group-member-manage-pager-buttons {
        padding-left: 0.5em; /*0.5u*/
      }
      #gs-group-member-manage-members .userimage {
        overflow: hidden;
        width: 1.25em;
        height: 1.25em;
        padding-right: 0.625em;
      }
    </style>
  </head>
  <body>
    <tal:block content="structure provider:groupserver.FormStatusMessage"
               define="errors view/errors; status view/status; widgets view/widgets"
               metal:fill-slot="messages">&#160;</tal:block>
    <ul metal:fill-slot="breadcrumb">
      <li>
        <a href="/" class="icon-alone">
          <span aria-hidden="true" data-icon="&#x2302;"></span>
          <span class="screen-reader-text">Site home page</span>
        </a>
      </li>
      <li>
        <a class="group"
           tal:attributes="href string:${view/groupInfo/relativeURL}/">
          <b
            tal:content="view/groupInfo/name">This group</b></a>
      </li>
      <li>Manage members</li>
    </ul>
    <div metal:fill-slot="body" id="gs-group-member-manage"
         tal:define="memberManager view/memberManager">
        <div id="gs-group-member-manage-alternate-actions" class="btn-group">
          <a href="admin_join.html" class="btn"
             data-icon="&#10010;"><b>Invite</b></a>
          <a href="members.html" class="btn"
             data-icon="&#xe00b;">Log</a>
        </div><!--gs-group-member-manage-alternate-actions-->
      <h1>Manage the members</h1>
      <form enctype="multipart/form-data"  method="post" action="."
            tal:attributes="action request/URL" id="manage-members">
        <p class="muted intro"
          tal:define="membersInfo memberManager/membersInfo;
                      fullMemberCount membersInfo/fullMemberCount;
                      invitedMemberCount membersInfo/invitedMemberCount">
          <span id="gs-group-member-manage-count">
            <tal:block condition="python:fullMemberCount==1">
              There is one member of
              <span class="group"
                    tal:content="view/groupInfo/name">this group</span>.
            </tal:block>
            <tal:block condition="python:fullMemberCount!=1">
              There are <span tal:content="fullMemberCount">n</span>
              members of
              <span class="group"
                    tal:content="view/groupInfo/name">this group</span>.
            </tal:block>
          </span>
        </p><!--intro-->
        <div
          id="gs-group-member-manage-restrict"
          tal:define="show python:view.showOnly or 'all';
                      showAll python:show=='all';
                      showManagers python:show=='managers';
                      showModeratedIsValid view/memberManager/groupIsModerated;
                      showModerated python:showModeratedIsValid and show=='moderated';
                      showUnverified python:show=='unverified';
                      showInvitedIsValid view/memberManager/membersInfo/invitedMembers;
                      showInvited python:show=='invited';
                      showPostingIsValid view/memberManager/postingIsSpecial;
                      showPosting python:showPostingIsValid and show=='posting'">
          <h2 tal:condition="python:showAll or showManagers or showPosting or showModerated or showUnverified or showInvited">
            <span tal:condition="showAll">
              Showing <b>all the members</b>
            </span>
            <span tal:condition="showManagers">
              Showing all <b>administrators</b>
            </span>
            <span tal:condition="showPosting">
              Showing all <b>posting members</b>
            </span>
            <span tal:condition="showModerated">
              Showing all <b>moderated members</b>
            </span>
            <span tal:condition="showUnverified">
              Showing all members that <b>lack a verified email addresses</b>
            </span>
            <span tal:condition="showInvited">
              Showing all <b>invited members</b>
            </span>
            <span id="gs-group-member-manage-pager"
                  tal:condition="view/memberManager/totalPages">
              <span id="gs-group-member-manage-pager-pages" class="muted">
                (Page
                <b tal:content="view/memberManager/page"/> of
                <b tal:content="view/memberManager/totalPages"/>)</span>
                <span id="gs-group-member-manage-pager-buttons"
                    tal:define="baseURL python:view.showOnly and 'managemembers.html?showOnly=%s&amp;' % view.showOnly or 'managemembers.html?'">
                <a tal:attributes="href string:${baseURL}page=${view/memberManager/firstPageLink}"
                   tal:condition="view/memberManager/firstPageLink"
                   href="#" class="first btn btn-small">First</a>
                <span tal:condition="not:view/memberManager/firstPageLink"
                      class="first btn btn-small disabled">First</span>
                <a href="#" class="previous btn btn-small"
                   tal:attributes="href string:${baseURL}page=${view/memberManager/prevPageLink}"
                   tal:condition="view/memberManager/prevPageLink"
                   data-icon="&#x25c3;">Prev</a>
                <span href="#" class="previous btn btn-small disabled"
                      tal:condition="not:view/memberManager/prevPageLink"
                      data-icon="&#x25c3;">Prev</span>
                <a tal:attributes="href string:${baseURL}page=${view/memberManager/nextPageLink}"
                   tal:condition="view/memberManager/nextPageLink"
                   href="#" class="next btn btn-small"
                   data-icon-after="&#x25b9;">Next</a>
                <span tal:condition="not:view/memberManager/nextPageLink"
                      class="next btn btn-small disabled"
                      data-icon-after="&#x25b9;">Next</span>
                <a tal:attributes="href string:${baseURL}page=${view/memberManager/lastPageLink}"
                   tal:condition="view/memberManager/lastPageLink"
                   href="#" class="last btn btn-small">Last</a>
                <span tal:condition="not:view/memberManager/lastPageLink"
                      class="last btn btn-small disabled">Last</span>
              </span><!--gs-group-member-manage-pager-buttons-->
            </span><!--gs-group-member-manage-pager-->
          </h2>
          <ul>
            <li tal:condition="not:showAll">
              <a href="#"
                 tal:attributes="href string:managemembers.html">Show
              <b>all</b> the members of
              <span class="group"
                    tal:content="view/groupInfo/name">this group</span></a>
            </li>
            <li tal:condition="not:showManagers">
              <a href="#"
                 tal:attributes="href string:managemembers.html?showOnly=managers">Show
              only the <b>administrators</b></a>
            </li>
            <li tal:condition="python:showInvitedIsValid and not(showInvited)">
              <a href="#"
                 tal:attributes="href string:managemembers.html?showOnly=invited">Show
              only the <b>invited members</b></a>
            </li>
            <li tal:condition="python:showModeratedIsValid and not(showModerated)">
              <a href="#"
                 tal:attributes="href string:managemembers.html?showOnly=moderated">Show
              only the <b>moderated</b> members</a>
            </li>
            <li tal:condition="not:showUnverified">
              <a href="#"
                 tal:attributes="href string:managemembers.html?showOnly=unverified">Show
              only the members that lack a verified email addresses</a>
            </li>
            <li tal:condition="python:showPostingIsValid and not(showPosting)">
              <a href="#"
                 tal:attributes="href string:managemembers.html?showOnly=posting">Show
              only the <b>posting</b> members</a>
            </li>
          </ul>
        </div><!--gs-group-member-manage-restrict-->
        <input type="hidden" class="hidden" name="showOnly" value=""
               tal:attributes="value view/showOnly"/>
        <input type="hidden" class="hidden" name="page" value=""
               tal:attributes="value view/page"/>
        <div id="gs-group-member-manage-members"
             tal:define="statusActions memberManager/memberStatusActions;
                           widgets view/widgets">
          <div tal:replace="structure provider:groupserver.MemberStatusActions"/>
        </div><!--gs-group-member-manage-members-->
        <div class="statusActions"
             tal:define="hasPtnCoachRemove python:view.widgets.get('ptnCoachRemove')"
             tal:condition="python:hasPtnCoachRemove and not(memberManager.postingIsSpecial)"
             tal:attributes="class python:((len(memberManager.memberStatusActions)%2)==0) and 'statusActions odd' or 'statusActions'">
          <div class="ptnCoach ptnCoachRemove"
               tal:define="widgets python:[view.widgets['ptnCoachRemove']]">
            <div tal:replace="structure provider:groupserver.FormWidgets"/>
          </div>
        </div>
        <p tal:condition="not:view/form_fields">
          There are no members to display.
        </p>
        <div class="buttons" tal:condition="python:view.availableActions and view.form_fields">
          <tal:block repeat="action view/actions">
            <div class="formelementbutton">
              <span tal:replace="structure action/render">Button</span>
            </div>
          </tal:block>
        </div>
      </form>
    </div>
    <script
      metal:fill-slot="javascript"
      type="text/javascript"
      src="/++resource++gs-group-member-manage-20160203.js"
      defer="defer"> </script>
  </body>
</html>
